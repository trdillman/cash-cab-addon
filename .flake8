[flake8]
# CashCab Blender Addon - Flake8 Configuration
# Focus on actual bugs while ignoring harmless style issues

# Maximum line length - modern standard, longer than default 79 for readability
max-line-length = 120

# Exclude patterns
# Build artifacts, cache directories, and Blender-generated files
exclude =
    .git,
    __pycache__,
    .pytest_cache,
    .venv,
    venv,
    env,
    build,
    dist,
    *.egg-info,
    .tox,
    .coverage,
    htmlcov,
    # Blender backup files
    *.blend1,
    *.blend2,
    # Test artifacts
    reports/,
    backup/

# Ignore rules that focus on style vs actual bugs
# --------------------------------------------------
# Style-related ignores (harmless):
# E201 - whitespace after '['
# E202 - whitespace before ']'
# E203 - whitespace before ':' (conflicts with Black)
# E221 - multiple spaces before operator
# E222 - multiple spaces after operator
# E226 - missing whitespace around arithmetic operator (sometimes style choice)
# E231 - missing whitespace after ','
# E241 - multiple spaces after ','
# E242 - tab after ','
# E251 - unexpected spaces around keyword / parameter equals
# E261 - at least two spaces before inline comment
# E262 - inline comment should start with '# '
# E265 - block comment should start with '# '
# E266 - too many '#' before block comment
# E271 - multiple spaces after keyword
# E272 - multiple spaces before keyword
# E273 - tab after keyword
# E274 - tab after keyword
# E275 - missing whitespace after keyword
# E302 - expected 2 blank lines
# E303 - too many blank lines
# E305 - expected 2 blank lines after end of function or class
# E401 - multiple imports on one line (sometimes acceptable for short imports)
# E402 - module level import not at top of file (needed for Blender dynamic imports)
# E501 - line too long (we have max-line-length=120)
# E502 - the backslash is redundant between brackets
# E701 - multiple statements on one line
# E702 - multiple statements on one line
# E704 - multiple statements on one line
# E711 - comparison to None should be 'if cond is None:'
# E712 - comparison to True should be 'if cond is True:' or 'if cond:'
# E713 - test for membership should be 'not cond in x' rather than 'not x in cond'
# E714 - use 'is not' operator for checking membership
# E721 - do not compare types, use 'isinstance()'
# E722 - do not use bare except
# E731 - do not assign a lambda expression, use a def
# E741 - ambiguous variable name
# E742 - ambiguous class definition
# E743 - ambiguous function definition
# W291 - trailing whitespace (harmless)
# W292 - no newline at end of file (harmless)
# W293 - blank line contains whitespace
# W391 - blank line at end of file
# W503 - line break before binary operator
# W504 - line break after binary operator
# W605 - invalid escape sequence
# F401 - module imported but unused (needed for Blender API registration)
# F811 - redefinition of unused name (common in Blender property classes)
# F821 - undefined name (sometimes false positive with Blender dynamic imports)
# F841 - local variable is assigned to but never used (sometimes needed for API compatibility)

# Specific rules for this Blender addon:
# F822 - forward annotation errors (common in Blender addons with circular imports)
# F823 - duplicate function argument names (rare but can be false positive)
# F403 - 'from module import *' used (needed for Blender API)
# F405 - name may be undefined, or defined from star imports (needed for Blender API)

ignore =
    E201,E202,E203,E221,E222,E226,E231,E241,E242,E251,E261,E262,E265,E266,
    E271,E272,E273,E274,E275,E302,E303,E305,E401,E402,E501,E502,E701,E702,
    E704,E711,E712,E713,E714,E721,E722,E731,E741,E742,E743,W291,W292,W293,W391,
    W503,W504,W605,F401,F811,F821,F841,F822,F823,F403,F405

# Per-file ignores for special cases
per-file-ignores =
    # Test files can have longer lines and more relaxed style
    tests/*:E501,F401,F811,F841,
    # Blender registration files often need dynamic imports
    __init__.py:E402,F401,F403,F405,
    # Compositor scripts have specific formatting needs
    assets/compositor_script.py:E501,E701,
    # Build scripts can be more relaxed
    build.py:E501,E402,
    # Asset manager CLI can have relaxed style
    asset_manager/cli.py:E501,E402,F401,
    # Parser modules often need complex imports
    parse/**/*.py:E402,F401,F403,F405,
    # Route modules with complex logic
    route/**/*.py:E501,F401,F841,
    # GUI modules often need dynamic property access
    gui/**/*.py:E501,F401,F711,F712

# Maximum complexity - allow reasonable complexity for Blender addons
max-complexity = 25

# Keep the CI configuration - focus on critical errors that break runtime
select = E9,F63,F7,F82

# Inline comments can start with '# '
inline-comment-spaces = 1

# Allow using '#' for inline comments
hash-comments = true
